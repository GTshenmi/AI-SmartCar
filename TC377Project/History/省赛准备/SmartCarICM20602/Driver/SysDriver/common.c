/*
 * common.c
 *
 *  Created on: 2021年4月1日
 *      Author: 936305695
 */

#ifndef DRIVER_SYSDRIVER_COMMON_C_
#define DRIVER_SYSDRIVER_COMMON_C_

#include "common.h"
/*
 *
 * ADC:
 *
 * */

/*
 * adc 通道 枚举   ADC0对应管脚 AN0 file IfxEvadc_PinMap.c
 */


/**
 * ADC寄存器
 */
IfxEvadc_Adc vadc;

/**
 * ADC转换结构体
 */
Ifx_EVADC_G_RES conversionResult;

/**
 * ADC转换组
 */
IfxEvadc_Adc_Group g_AdcGroup[ADC_GROUPS_NUM];
char adc_init_flag = 0;
char adc_group_init_flag[ADC_GROUPS_NUM];
/**
 * ADC转换通道配置结构体
 */
IfxEvadc_Adc_Channel g_AdcChannel[ADC_CHANNELS_NUM];


/*
 *
 * GPIO:
 *
 * */
/* GPIO外部中断 */
IFX_INTERRUPT(PIN_INT0_IRQHandler, PIN_INT0_VECTABNUM, PIN_INT0_PRIORITY);
IFX_INTERRUPT(PIN_INT1_IRQHandler, PIN_INT1_VECTABNUM, PIN_INT1_PRIORITY);
IFX_INTERRUPT(PIN_INT2_IRQHandler, PIN_INT2_VECTABNUM, PIN_INT2_PRIORITY);
IFX_INTERRUPT(PIN_INT3_IRQHandler, PIN_INT3_VECTABNUM, PIN_INT3_PRIORITY);

/** 外部中断CPU标号 */
const unsigned char PinIrqVectabNum[4]  = {PIN_INT0_VECTABNUM, PIN_INT1_VECTABNUM, PIN_INT2_VECTABNUM, PIN_INT3_VECTABNUM};

/** 外部中断优先级 */
const unsigned char PinIrqPriority[4]   = {PIN_INT0_PRIORITY, PIN_INT1_PRIORITY, PIN_INT2_PRIORITY, PIN_INT3_PRIORITY};

/** 外部中断服务函数地址 */
const void *PinIrqFuncPointer[4] = {&PIN_INT0_IRQHandler, &PIN_INT1_IRQHandler, &PIN_INT2_IRQHandler, &PIN_INT3_IRQHandler};

/*
 *
 * PWM:
 *
 * */

//PWM 配置结构体
IfxGtm_Atom_Pwm_Driver g_AtomDriverPWM[32];
IfxGtm_Atom_Pwm_Config g_atomConfig;
IfxGtm_Tom_Pwm_Config tomConfig;
IfxGtm_Tom_Pwm_Driver tomDriverPWM[32];


/*
 *
 * SPI:
 *
 * */

/** QSPI中断CPU标号 */
const unsigned char QSpiIrqVectabNum[4] = {QSPI0_VECTABNUM, QSPI1_VECTABNUM, QSPI2_VECTABNUM, QSPI3_VECTABNUM};

/** QSPI中断优先级 */
const unsigned char QSpiIrqPriority[12] = {QSPI0_RX_PRIORITY, QSPI0_TX_PRIORITY, QSPI0_ER_PRIORITY, QSPI1_RX_PRIORITY, QSPI1_TX_PRIORITY, QSPI1_ER_PRIORITY,
                                   QSPI2_RX_PRIORITY, QSPI2_TX_PRIORITY, QSPI2_ER_PRIORITY, QSPI3_RX_PRIORITY, QSPI3_TX_PRIORITY, QSPI3_ER_PRIORITY};

/** QSPI 配置结构体 */
IfxQspi_SpiMaster         g_QSPIConfig[4];
IfxQspi_SpiMaster_Channel g_QspiMasterChannel[4];

/* QSPI中断 */
IFX_INTERRUPT(QSPI0_RX_IRQHandler, QSPI0_VECTABNUM, QSPI0_RX_PRIORITY);
IFX_INTERRUPT(QSPI1_RX_IRQHandler, QSPI1_VECTABNUM, QSPI1_RX_PRIORITY);
IFX_INTERRUPT(QSPI2_RX_IRQHandler, QSPI2_VECTABNUM, QSPI2_RX_PRIORITY);
IFX_INTERRUPT(QSPI3_RX_IRQHandler, QSPI3_VECTABNUM, QSPI3_RX_PRIORITY);
IFX_INTERRUPT(QSPI0_TX_IRQHandler, QSPI0_VECTABNUM, QSPI0_TX_PRIORITY);
IFX_INTERRUPT(QSPI1_TX_IRQHandler, QSPI1_VECTABNUM, QSPI1_TX_PRIORITY);
IFX_INTERRUPT(QSPI2_TX_IRQHandler, QSPI2_VECTABNUM, QSPI2_TX_PRIORITY);
IFX_INTERRUPT(QSPI3_TX_IRQHandler, QSPI3_VECTABNUM, QSPI3_TX_PRIORITY);
IFX_INTERRUPT(QSPI0_ER_IRQHandler, QSPI0_VECTABNUM, QSPI0_ER_PRIORITY);
IFX_INTERRUPT(QSPI1_ER_IRQHandler, QSPI1_VECTABNUM, QSPI1_ER_PRIORITY);
IFX_INTERRUPT(QSPI2_ER_IRQHandler, QSPI2_VECTABNUM, QSPI2_ER_PRIORITY);
IFX_INTERRUPT(QSPI3_ER_IRQHandler, QSPI3_VECTABNUM, QSPI3_ER_PRIORITY);

/** QSPI中断服务函数地址 */
const void *QSPIIrqFuncPointer[12] = {&QSPI0_RX_IRQHandler, &QSPI0_TX_IRQHandler, &QSPI0_ER_IRQHandler,
                                    &QSPI1_RX_IRQHandler, &QSPI1_TX_IRQHandler, &QSPI1_ER_IRQHandler,
                                    &QSPI2_RX_IRQHandler, &QSPI2_TX_IRQHandler, &QSPI2_ER_IRQHandler,
                                    &QSPI3_RX_IRQHandler, &QSPI3_TX_IRQHandler, &QSPI3_ER_IRQHandler,};

/**
 *  ASC SPI通信结构体
 */
IfxAsclin_Spi g_SpiConfig[4];

/** SPI中断CPU标号 */
const unsigned char SpiIrqVectabNum[4] = {SPI0_VECTABNUM, SPI1_VECTABNUM, SPI2_VECTABNUM, SPI3_VECTABNUM};

/** SPI中断优先级 */
const unsigned char SpiIrqPriority[12] = {SPI0_RX_PRIORITY, SPI0_TX_PRIORITY, SPI0_ER_PRIORITY, SPI1_RX_PRIORITY, SPI1_TX_PRIORITY, SPI1_ER_PRIORITY,
                                   SPI2_RX_PRIORITY, SPI2_TX_PRIORITY, SPI2_ER_PRIORITY, SPI3_RX_PRIORITY, SPI3_TX_PRIORITY, SPI3_ER_PRIORITY};

/* SPI中断 */
IFX_INTERRUPT(SPI0_RX_IRQHandler, SPI0_VECTABNUM, SPI0_RX_PRIORITY);
IFX_INTERRUPT(SPI1_RX_IRQHandler, SPI1_VECTABNUM, SPI1_RX_PRIORITY);
IFX_INTERRUPT(SPI2_RX_IRQHandler, SPI2_VECTABNUM, SPI2_RX_PRIORITY);
IFX_INTERRUPT(SPI3_RX_IRQHandler, SPI3_VECTABNUM, SPI3_RX_PRIORITY);
IFX_INTERRUPT(SPI0_TX_IRQHandler, SPI0_VECTABNUM, SPI0_TX_PRIORITY);
IFX_INTERRUPT(SPI1_TX_IRQHandler, SPI1_VECTABNUM, SPI1_TX_PRIORITY);
IFX_INTERRUPT(SPI2_TX_IRQHandler, SPI2_VECTABNUM, SPI2_TX_PRIORITY);
IFX_INTERRUPT(SPI3_TX_IRQHandler, SPI3_VECTABNUM, SPI3_TX_PRIORITY);
IFX_INTERRUPT(SPI0_ER_IRQHandler, SPI0_VECTABNUM, SPI0_ER_PRIORITY);
IFX_INTERRUPT(SPI1_ER_IRQHandler, SPI1_VECTABNUM, SPI1_ER_PRIORITY);
IFX_INTERRUPT(SPI2_ER_IRQHandler, SPI2_VECTABNUM, SPI2_ER_PRIORITY);
IFX_INTERRUPT(SPI3_ER_IRQHandler, SPI3_VECTABNUM, SPI3_ER_PRIORITY);

/** SPI中断服务函数地址 */
const void *SpiIrqFuncPointer[12] = {&SPI0_RX_IRQHandler, &SPI0_TX_IRQHandler, &SPI0_ER_IRQHandler,
                                    &SPI1_RX_IRQHandler, &SPI1_TX_IRQHandler, &SPI1_ER_IRQHandler,
                                    &SPI2_RX_IRQHandler, &SPI2_TX_IRQHandler, &SPI2_ER_IRQHandler,
                                    &SPI3_RX_IRQHandler, &SPI3_TX_IRQHandler, &SPI3_ER_IRQHandler,};



/*
 *
 * TIM:
 *
 * */

IFX_INTERRUPT(CCU60_CH0_IRQHandler, CCU60_VECTABNUM, CCU60_CH0_PRIORITY);
IFX_INTERRUPT(CCU60_CH1_IRQHandler, CCU60_VECTABNUM, CCU60_CH1_PRIORITY);
IFX_INTERRUPT(CCU61_CH0_IRQHandler, CCU61_VECTABNUM, CCU61_CH0_PRIORITY);
IFX_INTERRUPT(CCU61_CH1_IRQHandler, CCU61_VECTABNUM, CCU61_CH1_PRIORITY);

/** CCU6中断CPU标号 */
const uint8 Ccu6IrqVectabNum[2] = {CCU60_VECTABNUM, CCU61_VECTABNUM};

/** CCU6中断优先级 */
const uint8 Ccu6IrqPriority[4] = {CCU60_CH0_PRIORITY, CCU60_CH1_PRIORITY, CCU61_CH0_PRIORITY, CCU61_CH1_PRIORITY};

/** CCU6中断服务函数地址 */
const void *Ccu6IrqFuncPointer[4] = {&CCU60_CH0_IRQHandler, &CCU60_CH1_IRQHandler, &CCU61_CH0_IRQHandler,&CCU61_CH1_IRQHandler};


IFX_INTERRUPT(STM0_CH0_IRQHandler, STM0_VECTABNUM, STM0_CH0_PRIORITY);
IFX_INTERRUPT(STM0_CH1_IRQHandler, STM0_VECTABNUM, STM0_CH1_PRIORITY);
IFX_INTERRUPT(STM1_CH0_IRQHandler, STM1_VECTABNUM, STM1_CH0_PRIORITY);
IFX_INTERRUPT(STM1_CH1_IRQHandler, STM1_VECTABNUM, STM1_CH1_PRIORITY);

/** 外部中断CPU标号 */
const uint8 StmIrqVectabNum[2]  = {STM0_VECTABNUM, STM1_VECTABNUM};

/** 外部中断优先级 */
const uint8 StmIrqPriority[4]   = {STM0_CH0_PRIORITY, STM0_CH1_PRIORITY, STM1_CH0_PRIORITY, STM1_CH1_PRIORITY};

/** 外部中断服务函数地址 */
const void *StmIrqFuncPointer[4] = {&STM0_CH0_IRQHandler, &STM0_CH1_IRQHandler, &STM1_CH0_IRQHandler, &STM1_CH1_IRQHandler};


//  STM初始化配置结构体
IfxStm_CompareConfig g_StmCompareConfig[4];


/*
 *
 * UART:
 *
 * */


//串口通信结构体
IfxAsclin_Asc g_UartConfig[4];

uint8_t s_AscTxBuffer[4][ASC_TX_BUFFER_SIZE + sizeof(Ifx_Fifo) + 8];
uint8_t s_AscRxBuffer[4][ASC_TX_BUFFER_SIZE + sizeof(Ifx_Fifo) + 8];



/* UART中断 */
IFX_INTERRUPT(UART0_RX_IRQHandler, UART0_VECTABNUM, UART0_RX_PRIORITY);
IFX_INTERRUPT(UART1_RX_IRQHandler, UART1_VECTABNUM, UART1_RX_PRIORITY);
IFX_INTERRUPT(UART2_RX_IRQHandler, UART2_VECTABNUM, UART2_RX_PRIORITY);
IFX_INTERRUPT(UART3_RX_IRQHandler, UART3_VECTABNUM, UART3_RX_PRIORITY);
IFX_INTERRUPT(UART0_TX_IRQHandler, UART0_VECTABNUM, UART0_TX_PRIORITY);
IFX_INTERRUPT(UART1_TX_IRQHandler, UART1_VECTABNUM, UART1_TX_PRIORITY);
IFX_INTERRUPT(UART2_TX_IRQHandler, UART2_VECTABNUM, UART2_TX_PRIORITY);
IFX_INTERRUPT(UART3_TX_IRQHandler, UART3_VECTABNUM, UART3_TX_PRIORITY);
IFX_INTERRUPT(UART0_ER_IRQHandler, UART0_VECTABNUM, UART0_ER_PRIORITY);
IFX_INTERRUPT(UART1_ER_IRQHandler, UART1_VECTABNUM, UART1_ER_PRIORITY);
IFX_INTERRUPT(UART2_ER_IRQHandler, UART2_VECTABNUM, UART2_ER_PRIORITY);
IFX_INTERRUPT(UART3_ER_IRQHandler, UART3_VECTABNUM, UART3_ER_PRIORITY);


/** UART中断CPU标号 */
const uint8_t UartIrqVectabNum[4] = {UART0_VECTABNUM, UART1_VECTABNUM, UART2_VECTABNUM, UART3_VECTABNUM};

/** UART中断优先级 */
const uint8_t UartIrqPriority[12] = {UART0_RX_PRIORITY, UART0_TX_PRIORITY, UART0_ER_PRIORITY, UART1_RX_PRIORITY, UART1_TX_PRIORITY, UART1_ER_PRIORITY,
                                   UART2_RX_PRIORITY, UART2_TX_PRIORITY, UART2_ER_PRIORITY, UART3_RX_PRIORITY, UART3_TX_PRIORITY, UART3_ER_PRIORITY};

/** UART中断服务函数地址 */
const void *UartIrqFuncPointer[12] = {&UART0_RX_IRQHandler, &UART0_TX_IRQHandler, &UART0_ER_IRQHandler,
                                       &UART1_RX_IRQHandler, &UART1_TX_IRQHandler, &UART1_ER_IRQHandler,
                                       &UART2_RX_IRQHandler, &UART2_TX_IRQHandler, &UART2_ER_IRQHandler,
                                       &UART3_RX_IRQHandler, &UART3_TX_IRQHandler, &UART3_ER_IRQHandler,};



/** cpu软件中断优先级 */
const uint8 CpuSoftIrqPriority[12] = {
        CPU0_SOFT_IRQ0_PRIORITY, CPU0_SOFT_IRQ1_PRIORITY, CPU0_SOFT_IRQ2_PRIORITY,CPU0_SOFT_IRQ3_PRIORITY,
        CPU1_SOFT_IRQ0_PRIORITY, CPU1_SOFT_IRQ1_PRIORITY, CPU1_SOFT_IRQ2_PRIORITY,CPU1_SOFT_IRQ3_PRIORITY,
        CPU2_SOFT_IRQ0_PRIORITY, CPU2_SOFT_IRQ1_PRIORITY, CPU2_SOFT_IRQ2_PRIORITY,CPU2_SOFT_IRQ3_PRIORITY
};

/*
 *
 * SoftWare Interrupt.
 *
 * */
/* cpu软中断 */
IFX_INTERRUPT(CPU0_SOFT_IRQ0Handler, 0, CPU0_SOFT_IRQ0_PRIORITY);
IFX_INTERRUPT(CPU0_SOFT_IRQ1Handler, 0, CPU0_SOFT_IRQ1_PRIORITY);
IFX_INTERRUPT(CPU0_SOFT_IRQ2Handler, 0, CPU0_SOFT_IRQ2_PRIORITY);
IFX_INTERRUPT(CPU0_SOFT_IRQ3Handler, 0, CPU0_SOFT_IRQ3_PRIORITY);

IFX_INTERRUPT(CPU1_SOFT_IRQ0Handler, 2, CPU1_SOFT_IRQ0_PRIORITY);
IFX_INTERRUPT(CPU1_SOFT_IRQ1Handler, 2, CPU1_SOFT_IRQ1_PRIORITY);
IFX_INTERRUPT(CPU1_SOFT_IRQ2Handler, 2, CPU1_SOFT_IRQ2_PRIORITY);
IFX_INTERRUPT(CPU1_SOFT_IRQ3Handler, 2, CPU1_SOFT_IRQ3_PRIORITY);

IFX_INTERRUPT(CPU2_SOFT_IRQ0Handler, 3, CPU2_SOFT_IRQ0_PRIORITY);
IFX_INTERRUPT(CPU2_SOFT_IRQ1Handler, 3, CPU2_SOFT_IRQ1_PRIORITY);
IFX_INTERRUPT(CPU2_SOFT_IRQ2Handler, 3, CPU2_SOFT_IRQ2_PRIORITY);
IFX_INTERRUPT(CPU2_SOFT_IRQ3Handler, 3, CPU2_SOFT_IRQ3_PRIORITY);
/** cpu软中断服务函数地址 */
const void *CpuSoftIrqFuncPointer[12] = {&CPU0_SOFT_IRQ0Handler, &CPU0_SOFT_IRQ1Handler, &CPU0_SOFT_IRQ2Handler,
        &CPU0_SOFT_IRQ3Handler, &CPU1_SOFT_IRQ0Handler, &CPU1_SOFT_IRQ1Handler, &CPU1_SOFT_IRQ2Handler,
        &CPU1_SOFT_IRQ3Handler, &CPU2_SOFT_IRQ0Handler, &CPU2_SOFT_IRQ1Handler, &CPU2_SOFT_IRQ2Handler,
        &CPU2_SOFT_IRQ3Handler};

App_Cpu0 g_AppCpu0;
#endif /* DRIVER_SYSDRIVER_COMMON_C_ */
